# BFF(Facade) 계층 제거 분석 및 설계 문서

> **프로젝트**: emoforge
> **작성일**: 2026-01-30
> **작성자**: Senior Backend Architect
> **문서 목적**: BFF 계층 제거를 위한 AS-IS/TO-BE 분석 및 전환 전략 수립

---

## 목차

1. [AS-IS PostList 조회 흐름 분석](#1-as-is-postlist-조회-흐름-분석)
2. [TO-BE 구조 제안](#2-to-be-구조-제안)
3. [BFF 제거 판단 기준](#3-bff-제거-판단-기준)
4. [단계별 전환 전략](#4-단계별-전환-전략)
5. [결론 및 권고사항](#5-결론-및-권고사항)

---

## 1. AS-IS PostList 조회 흐름 분석

### 1.1 현재 시스템 구조 개요

```
┌─────────────────────────────────────────────────────────────────────────┐
│                              Frontend                                    │
└─────────────────────────────────┬───────────────────────────────────────┘
                                  │ GET /api/posts
                                  ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                          PostController                                  │
└─────────────────────────────────┬───────────────────────────────────────┘
                                  │
                                  ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                      PostListFacadeService (BFF)                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  역할: 복합 데이터 조립 (Composition)                             │    │
│  │  - Post 기본 정보 조회                                           │    │
│  │  - Author 정보 매핑 (nickname, profileImageUrl)                  │    │
│  │  - Attachment 개수 매핑                                          │    │
│  │  - 페이징 처리                                                   │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└──────────────┬──────────────────────┬──────────────────────┬────────────┘
               │                      │                      │
               ▼                      ▼                      ▼
    ┌──────────────────┐   ┌──────────────────┐   ┌──────────────────┐
    │   Post-Service   │   │   Auth-Service   │   │ Attach-Service   │
    │   (Module-Post)  │   │   (Module-Auth)  │   │(Module-Attachment)│
    ├──────────────────┤   ├──────────────────┤   ├──────────────────┤
    │ - Post 테이블    │   │ - Member 테이블  │   │ - Attachment     │
    │ - Category 테이블│   │   (nickname)     │   │   테이블         │
    │ - Comment 테이블 │   │                  │   │   (postId 참조)  │
    │ - Tag 테이블     │   │                  │   │                  │
    └──────────────────┘   └──────────────────┘   └──────────────────┘
           │                      │                      │
           ▼                      ▼                      ▼
    ┌──────────────────┐   ┌──────────────────┐   ┌──────────────────┐
    │    Post DB       │   │    Auth DB       │   │   Attach DB      │
    │   (MariaDB)      │   │   (MariaDB)      │   │   (MariaDB)      │
    └──────────────────┘   └──────────────────┘   └──────────────────┘
```

### 1.2 PostList 조회 시 데이터 흐름

| 순서 | 단계 | 호출 대상 | 반환 데이터 | 비고 |
|------|------|-----------|-------------|------|
| 1 | 게시글 목록 조회 | PostRepository | id, title, createdAt, categoryName, memberUuid, commentCount | JPQL 서브쿼리로 댓글 수 계산 |
| 2 | PostId 목록 추출 | 내부 처리 | List\<Long\> postIds | - |
| 3 | 첨부파일 개수 조회 | AttachClient (Feign) | Map\<Long, Integer\> | Batch API 호출 |
| 4 | 작성자 정보 조회 | AuthClient (Feign) | nickname, profileImageUrl | UUID별 개별 호출 (캐싱) |
| 5 | 응답 조립 | PostListFacadeService | PostListItemResponse | 3개 데이터 소스 병합 |

### 1.3 서비스 간 의존 관계

```
┌─────────────────────────────────────────────────────────────────┐
│                     Post-Service (BFF 소재)                      │
│                                                                  │
│  PostListFacadeService                                          │
│  ├── PostRepository (직접 DB 접근)                               │
│  │     └── Post, Category, Comment 테이블                        │
│  │                                                              │
│  ├── AuthClient (Feign 원격 호출)                                │
│  │     └── GET /api/auth/public/members/{uuid}/profile          │
│  │     └── 반환: nickname, profileImageUrl                       │
│  │                                                              │
│  └── AttachClient (Feign 원격 호출)                              │
│        └── POST /api/attach/count/batch                         │
│        └── 반환: Map<postId, attachmentCount>                    │
└─────────────────────────────────────────────────────────────────┘
                              │
          ┌───────────────────┼───────────────────┐
          │                   │                   │
          ▼                   ▼                   ▼
   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
   │  Post DB    │    │  Auth DB    │    │ Attach DB   │
   │  (Local)    │    │  (Remote)   │    │  (Remote)   │
   └─────────────┘    └─────────────┘    └─────────────┘
```

### 1.4 BFF(PostListFacadeService)가 담당하는 역할

| 역할 | 설명 | 필요 이유 (AS-IS) |
|------|------|------------------|
| **데이터 조립** | 3개 서비스의 데이터를 단일 응답으로 병합 | DB가 분리되어 있어 JOIN 불가 |
| **장애 격리** | Auth/Attach 서비스 장애 시 기본값 반환 | 외부 서비스 의존성 관리 |
| **호출 최적화** | memberUuid 캐싱으로 중복 호출 방지 | N+1 문제 완화 |
| **페이징 래핑** | PageResponseDTO로 프론트엔드 맞춤 응답 | 일관된 API 응답 구조 |

### 1.5 현재 구조의 문제점

| 문제점 | 영향도 | 설명 |
|--------|--------|------|
| **네트워크 지연** | 높음 | 매 목록 조회 시 2~N회의 원격 호출 발생 |
| **장애 전파 위험** | 중간 | Auth/Attach 서비스 장애가 Post 조회에 영향 |
| **트랜잭션 불일치** | 중간 | 삭제 시 분산 트랜잭션 처리 복잡도 증가 |
| **운영 복잡도** | 높음 | 3개 서비스 모니터링/배포/장애 대응 필요 |
| **코드 중복** | 낮음 | Facade 패턴으로 인한 보일러플레이트 |

---

## 2. TO-BE 구조 제안

### 2.1 목표 아키텍처 (DB 통합 후)

```
┌─────────────────────────────────────────────────────────────────────────┐
│                              Frontend                                    │
└─────────────────────────────────┬───────────────────────────────────────┘
                                  │ GET /api/posts
                                  ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                          PostController                                  │
└─────────────────────────────────┬───────────────────────────────────────┘
                                  │
                                  ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                          PostService                                     │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  역할: 단순 쿼리 실행 및 결과 반환                                  │    │
│  │  - 단일 JOIN 쿼리로 모든 데이터 조회                               │    │
│  │  - Facade 불필요                                                  │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────┬───────────────────────────────────────┘
                                  │
                                  ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                       PostRepository (통합 쿼리)                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Single Query:                                                   │    │
│  │  - Post 기본 정보                                                 │    │
│  │  - Member nickname (JOIN)                                        │    │
│  │  - Attachment count (서브쿼리)                                    │    │
│  │  - Comment count (서브쿼리)                                       │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────┬───────────────────────────────────────┘
                                  │
                                  ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                         통합 Database (MariaDB)                          │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐   │
│  │    Post      │ │   Member     │ │  Attachment  │ │   Comment    │   │
│  │   테이블     │ │   테이블     │ │   테이블     │ │   테이블     │   │
│  └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘
```

### 2.2 Post 도메인으로 흡수해야 할 데이터

| 현재 위치 | 데이터 | 흡수 방식 | 이유 |
|-----------|--------|-----------|------|
| Auth DB | Member.nickname | **JOIN 참조** | Post 테이블에 memberUuid FK 존재, JOIN으로 해결 |
| Auth DB | Member.profileImageUrl | **JOIN 참조** | 상동 |
| Attach DB | Attachment.count | **서브쿼리** | postId FK로 연결, COUNT 서브쿼리로 해결 |
| Attach DB | Attachment.* (상세) | **JOIN 참조** | 상세 조회 시 필요한 경우만 |

### 2.3 JOIN으로 대체 가능한 항목

| 항목 | 현재 방식 | TO-BE 방식 | 대체 이유 |
|------|-----------|------------|-----------|
| **작성자 닉네임** | AuthClient.getPublicMemberProfile() | LEFT JOIN member ON post.member_uuid = member.uuid | 동일 DB 내 FK 관계 성립 |
| **프로필 이미지** | AuthClient.getPublicMemberProfile() | LEFT JOIN member | 상동 |
| **첨부파일 개수** | AttachClient.countByPostIds() | 서브쿼리 SELECT COUNT(*) FROM attachment | postId FK로 연결 가능 |
| **댓글 개수** | 이미 서브쿼리 | 유지 | 현재도 DB 서브쿼리 사용 중 |

### 2.4 TO-BE 쿼리 책임 범위

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    PostRepository 쿼리 책임 범위                         │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  SELECT                                                                  │
│    p.id,                           -- Post 기본 정보                     │
│    p.title,                                                              │
│    p.created_at,                                                         │
│    c.name AS category_name,        -- Category JOIN                      │
│    m.nickname,                     -- Member JOIN (NEW)                  │
│    m.profile_image_url,            -- Member JOIN (NEW)                  │
│    (SELECT COUNT(*) FROM comment                                         │
│     WHERE post_id = p.id) AS comment_count,                              │
│    (SELECT COUNT(*) FROM attachment                                      │
│     WHERE post_id = p.id                                                 │
│       AND upload_type = 'ATTACHMENT') AS attachment_count   -- (NEW)     │
│  FROM post p                                                             │
│  LEFT JOIN category c ON p.category_id = c.id                            │
│  LEFT JOIN member m ON p.member_uuid = m.uuid   -- (NEW)                 │
│  ORDER BY p.id DESC                                                      │
│                                                                          │
├─────────────────────────────────────────────────────────────────────────┤
│  책임 범위:                                                               │
│  - Post 도메인의 모든 조회 데이터는 단일 쿼리에서 해결                       │
│  - 외부 서비스 호출 완전 제거                                              │
│  - Facade 계층 불필요                                                     │
└─────────────────────────────────────────────────────────────────────────┘
```

### 2.5 AS-IS vs TO-BE 비교

| 비교 항목 | AS-IS | TO-BE |
|-----------|-------|-------|
| **DB 구조** | 3개 분리 (Post/Auth/Attach) | 1개 통합 |
| **서비스 호출** | 1 DB + 2 Feign 호출 | 1 DB 쿼리 |
| **레이어** | Controller → Facade → Service → Repository | Controller → Service → Repository |
| **장애 격리** | Fallback 로직 필요 | 불필요 (단일 트랜잭션) |
| **응답 시간** | 수십~수백 ms (네트워크 왕복) | 수 ms (단일 쿼리) |
| **트랜잭션** | 분산 (Saga 패턴 필요) | 로컬 (ACID 보장) |
| **코드량** | Facade + Fallback + Feign Client | Service + Repository |
| **운영 복잡도** | 높음 (3 서비스 모니터링) | 낮음 (1 서비스) |

---

## 3. BFF 제거 판단 기준

### 3.1 Facade 제거 가능 판단 기준

| 기준 | 제거 가능 조건 | 유지 필요 조건 |
|------|---------------|---------------|
| **데이터 소스** | 모든 데이터가 동일 DB에 존재 | 데이터가 물리적으로 분산되어 있음 |
| **JOIN 가능성** | FK 관계로 JOIN 가능 | JOIN 불가 또는 성능 저하 |
| **비즈니스 로직** | 단순 데이터 조합만 수행 | 복잡한 변환/계산 로직 존재 |
| **호출 패턴** | 동기 호출로 충분 | 비동기/병렬 호출 필요 |
| **장애 격리** | 단일 트랜잭션 내 처리 | 부분 실패 허용 필요 |

### 3.2 PostListFacadeService 제거 대상 분석

```
┌─────────────────────────────────────────────────────────────────────────┐
│               PostListFacadeService 제거 가능성 분석                      │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  현재 수행 역할:                                                          │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │ 1. PostRepository.findAllPosts() 호출          → DB 쿼리         │    │
│  │ 2. AttachClient.countByPostIds() 호출          → Feign 원격 호출  │    │
│  │ 3. AuthClient.getPublicMemberProfile() 호출    → Feign 원격 호출  │    │
│  │ 4. 3개 데이터 조립 (Composition)                → 단순 매핑       │    │
│  │ 5. PageResponseDTO 래핑                        → 단순 래핑       │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                          │
│  판단:                                                                    │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │ ✓ 역할 1: DB 통합 후 Repository가 직접 수행 가능                   │    │
│  │ ✓ 역할 2: DB 통합 후 서브쿼리로 대체 가능                          │    │
│  │ ✓ 역할 3: DB 통합 후 JOIN으로 대체 가능                            │    │
│  │ ✓ 역할 4: Repository 프로젝션(DTO)으로 대체 가능                   │    │
│  │ ✓ 역할 5: Service 계층에서 단순 래핑 가능                          │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                          │
│  결론: DB 통합 후 PostListFacadeService는 제거 가능                       │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### 3.3 Facade별 제거 판단 결과

| Facade 클래스 | 현재 역할 | 제거 가능 여부 | 판단 근거 |
|--------------|----------|---------------|----------|
| **PostListFacadeService** | Post + Auth + Attach 조합 | **제거 가능** | 모든 데이터 JOIN/서브쿼리로 대체 |
| **PostDetailFacadeService** | Post + Auth + Attach 상세 | **제거 가능** | 상동 |
| **CommentsFacadeService** | Comment + Auth 조합 | **제거 가능** | Comment-Member JOIN으로 대체 |
| **PostDeleteFacadeService** | Post + Attach 삭제 조율 | **제거 가능** | 단일 트랜잭션 + CASCADE 삭제 |
| **AdminPostListFacadeService** | Admin 전용 목록 | **제거 가능** | PostListFacadeService와 동일 패턴 |

### 3.4 제거 불가 상황 (참고)

다음 조건에서는 Facade 유지를 고려해야 함:

| 상황 | 이유 | 대응 방안 |
|------|------|----------|
| **외부 API 연동** | 자체 DB가 아닌 외부 시스템 데이터 | Facade 유지 또는 Cache 도입 |
| **비동기 집계** | 실시간 집계가 아닌 배치 데이터 | CQRS 패턴 고려 |
| **대용량 JOIN** | 수천만 건 이상의 JOIN 성능 이슈 | 비정규화 또는 Materialized View |
| **마이크로서비스 유지** | 서비스 독립 배포 요구사항 | API Gateway + BFF 유지 |

---

## 4. 단계별 전환 전략

### 4.1 전체 전환 로드맵

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           전환 로드맵                                    │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  Phase 1          Phase 2          Phase 3          Phase 4             │
│  ─────────        ─────────        ─────────        ─────────           │
│  DB 통합          Query 전환       BFF 제거         정리/최적화          │
│                                                                          │
│  ┌─────────┐     ┌─────────┐     ┌─────────┐     ┌─────────┐           │
│  │ 스키마  │ ──▶ │ 통합    │ ──▶ │ Facade  │ ──▶ │ Feign   │           │
│  │ 통합    │     │ 쿼리    │     │ 계층    │     │ Client  │           │
│  │         │     │ 작성    │     │ 제거    │     │ 제거    │           │
│  └─────────┘     └─────────┘     └─────────┘     └─────────┘           │
│                                                                          │
│  예상 기간: 각 단계 1~2주                                                 │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### 4.2 Step 1: DB 관점 정리

#### 목표
- Auth, Attach, Post DB를 단일 스키마로 통합
- FK 관계 정립 및 인덱스 최적화

#### 수행 작업

| 작업 | 상세 내용 |
|------|----------|
| **스키마 병합** | member, attachment 테이블을 Post 스키마로 이관 |
| **FK 설정** | post.member_uuid → member.uuid 관계 설정 |
| **FK 설정** | attachment.post_id → post.id 관계 설정 |
| **인덱스 추가** | member(uuid), attachment(post_id, upload_type) |
| **데이터 마이그레이션** | 기존 데이터 무결성 검증 후 이관 |

#### 리스크

| 리스크 | 영향도 | 완화 방안 |
|--------|--------|----------|
| 데이터 불일치 | 높음 | 마이그레이션 전 데이터 정합성 검증 스크립트 실행 |
| 스키마 충돌 | 중간 | 테이블명 prefix 부여 또는 namespace 분리 |
| 다운타임 | 높음 | Blue-Green 배포 또는 점진적 마이그레이션 |

#### 검증 포인트

- [ ] 모든 테이블이 단일 DB에 존재하는지 확인
- [ ] FK 제약조건이 정상 동작하는지 확인
- [ ] 기존 데이터 건수와 마이그레이션 후 건수 일치 여부
- [ ] 인덱스 생성 후 쿼리 실행 계획 검토

---

### 4.3 Step 2: Query 구조 전환

#### 목표
- Feign 호출을 JOIN/서브쿼리로 대체
- 신규 Repository 메서드 작성 (기존 유지)

#### 수행 작업

| 작업 | 상세 내용 |
|------|----------|
| **통합 쿼리 작성** | PostRepository에 신규 메서드 추가 (findAllPostsWithDetails) |
| **DTO 정의** | PostListItemProjection 등 프로젝션 DTO 정의 |
| **병행 운영** | 기존 Facade + 신규 쿼리 병행 (Feature Flag) |
| **성능 테스트** | 쿼리 실행 시간 비교 (AS-IS vs TO-BE) |

#### 신규 쿼리 구조

```
PostRepository
├── findAllPosts() (기존 - 유지)
├── findAllPostsWithDetails() (신규)
│   └── Post + Member(JOIN) + AttachCount(서브쿼리) + CommentCount(서브쿼리)
├── findPostDetailWithDetails() (신규)
│   └── Post + Member + Category + Tags
└── findAllPostsByTagWithDetails() (신규)
    └── 태그 필터 + 통합 쿼리
```

#### 리스크

| 리스크 | 영향도 | 완화 방안 |
|--------|--------|----------|
| 쿼리 성능 저하 | 중간 | 실행 계획 분석 및 인덱스 튜닝 |
| 서브쿼리 N+1 | 낮음 | 배치 서브쿼리 또는 Lateral Join 사용 |
| 기능 차이 | 낮음 | A/B 테스트로 응답 비교 |

#### 검증 포인트

- [ ] 신규 쿼리 실행 시간 < 기존 Facade 응답 시간
- [ ] 반환 데이터 필드 및 값 일치 여부 (JSON Diff)
- [ ] 페이징 동작 정상 여부
- [ ] NULL 처리 (Member 없는 Post, Attachment 없는 Post)

---

### 4.4 Step 3: BFF 제거

#### 목표
- Facade 계층 완전 제거
- Controller → Service → Repository 직결 구조

#### 수행 작업

| 작업 | 상세 내용 |
|------|----------|
| **Controller 수정** | Facade 대신 Service 직접 호출 |
| **Service 수정** | 신규 Repository 메서드 사용 |
| **Facade 삭제** | PostListFacadeService 등 5개 클래스 삭제 |
| **테스트 수정** | Facade 관련 단위/통합 테스트 업데이트 |

#### 제거 대상 파일

```
module-post/src/main/java/dev/emoforge/post/service/bff/
├── PostListFacadeService.java        (삭제)
├── PostDetailFacadeService.java      (삭제)
├── PostDeleteFacadeService.java      (삭제)
├── CommentsFacadeService.java        (삭제)

module-post/src/main/java/dev/emoforge/post/admin/service/bff/
├── AdminPostListFacadeService.java   (삭제)
```

#### 리스크

| 리스크 | 영향도 | 완화 방안 |
|--------|--------|----------|
| 기능 누락 | 높음 | 기존 Facade 로직 대비 체크리스트 작성 |
| API 호환성 | 중간 | Response DTO 스키마 변경 없이 유지 |
| 롤백 어려움 | 중간 | Feature Flag로 단계적 전환 |

#### 검증 포인트

- [ ] 모든 API 엔드포인트 정상 동작 (E2E 테스트)
- [ ] Response 스키마 변경 없음 (API 계약 유지)
- [ ] 에러 핸들링 동작 (존재하지 않는 Post 등)
- [ ] 페이징 메타데이터 정상 반환

---

### 4.5 Step 4: 정리 및 최적화 (선택)

#### 목표
- Feign Client 제거
- 불필요 의존성 정리
- 모니터링/로깅 정비

#### 수행 작업

| 작업 | 상세 내용 |
|------|----------|
| **Feign Client 삭제** | AuthClient, AttachClient 삭제 |
| **의존성 제거** | spring-cloud-starter-openfeign 제거 |
| **설정 정리** | application.yml의 service.auth.url 등 제거 |
| **로깅 정비** | 불필요한 원격 호출 로그 제거 |

#### 제거 대상 파일

```
module-post/src/main/java/dev/emoforge/post/service/external/
├── AuthClient.java                   (삭제)
├── AttachClient.java                 (삭제)
```

#### 검증 포인트

- [ ] 빌드 성공 여부
- [ ] 불필요한 의존성 없음 (dependency tree 확인)
- [ ] 애플리케이션 정상 기동

---

## 5. 결론 및 권고사항

### 5.1 핵심 결론

| 항목 | 결론 |
|------|------|
| **BFF 제거 가능 여부** | DB 통합 전제 시 **제거 가능** |
| **제거 대상** | 5개 Facade 클래스 전체 |
| **예상 효과** | 응답 시간 단축, 운영 복잡도 감소, 코드 단순화 |
| **주요 리스크** | 마이그레이션 과정의 데이터 불일치 |

### 5.2 권고 사항

| 우선순위 | 권고 내용 |
|----------|----------|
| **1** | DB 통합을 최우선으로 진행 (BFF 제거의 전제 조건) |
| **2** | 마이그레이션 전 데이터 정합성 검증 자동화 |
| **3** | Feature Flag 기반 점진적 전환 (Big Bang 지양) |
| **4** | 각 단계별 E2E 테스트 커버리지 확보 |
| **5** | 성능 기준선 측정 후 개선 효과 정량화 |

### 5.3 기대 효과

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           기대 효과 요약                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  성능 개선                                                               │
│  ├── 응답 시간: ~100ms → ~10ms (예상)                                    │
│  ├── 네트워크 호출: 3회 → 0회                                            │
│  └── DB 쿼리: 1회 (최적화된 단일 쿼리)                                   │
│                                                                          │
│  운영 효율                                                               │
│  ├── 모니터링 대상: 3 서비스 → 1 서비스                                  │
│  ├── 배포 복잡도: 3배 감소                                               │
│  └── 장애 포인트: 3개 → 1개                                              │
│                                                                          │
│  코드 품질                                                               │
│  ├── 삭제 파일: ~10개 (Facade + Client + DTO)                           │
│  ├── 삭제 라인: ~500줄 이상 (예상)                                       │
│  └── 테스트 단순화: Mock 대상 감소                                       │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 부록: 체크리스트

### A. DB 통합 체크리스트

- [ ] member 테이블 스키마 정의 완료
- [ ] attachment 테이블 스키마 정의 완료
- [ ] FK 관계 설정 완료
- [ ] 인덱스 설계 완료
- [ ] 데이터 마이그레이션 스크립트 작성
- [ ] 마이그레이션 테스트 환경 구축
- [ ] 데이터 검증 스크립트 작성

### B. Query 전환 체크리스트

- [ ] findAllPostsWithDetails() 쿼리 작성
- [ ] findPostDetailWithDetails() 쿼리 작성
- [ ] findAllPostsByTagWithDetails() 쿼리 작성
- [ ] 프로젝션 DTO 정의
- [ ] 실행 계획 분석 및 최적화
- [ ] 성능 벤치마크 수행

### C. BFF 제거 체크리스트

- [ ] Controller 수정
- [ ] Service 수정
- [ ] Facade 클래스 삭제
- [ ] Feign Client 삭제
- [ ] 테스트 업데이트
- [ ] E2E 테스트 수행
- [ ] API 문서 업데이트

---

*문서 끝*
